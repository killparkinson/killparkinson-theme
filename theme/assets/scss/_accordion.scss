.accordion-details {
  .accordion-item {
    border-bottom: 0;

    summary {
      position: relative;
      display: flex;
      align-items: center;
      width: 100%;
      padding: var(--#{$prefix}accordion-btn-padding-y) var(--#{$prefix}accordion-btn-padding-x);
      font-size: 1rem;
      color: var(--#{$prefix}accordion-btn-color);
      text-align: left;
      background-color: var(--#{$prefix}accordion-btn-bg);
      border-bottom: 0;
      border-radius: 0;
      border-top-left-radius: 0;
      border-top-right-radius: 0;
      overflow-anchor: none;
      transition: var(--#{$prefix}accordion-transition);

      &:focus {
        z-index: 3;
        outline: 0;
        box-shadow: var(--#{$prefix}accordion-btn-focus-box-shadow);
      }

      &::after {
        flex-shrink: 0;
        width: var(--#{$prefix}accordion-btn-icon-width);
        height: var(--#{$prefix}accordion-btn-icon-width);
        margin-left: auto;
        content: "";
        background-image: var(--#{$prefix}accordion-btn-icon);
        background-repeat: no-repeat;
        background-size: var(--#{$prefix}accordion-btn-icon-width);
        transition: var(--#{$prefix}accordion-btn-icon-transition);
      }

      /* Hide the default disclosure triangle on Safari */
      &::-webkit-details-marker {
        display: none;
      }
    }

    .accordion-collapse {
      display: grid;
      overflow: hidden;
      animation-duration: .33s;
      animation-timing-function: ease-out;

      &.collapsing {
        animation-timing-function: ease-in;
        animation-direction: reverse;
      }
    }

    .accordion-inner {
      min-height: 0;
    }

    .accordion-body p:last-child {
      margin-bottom: 0;
    }

    &:first-of-type summary {
      border-top-left-radius: var(--#{$prefix}accordion-border-radius);
      border-top-right-radius: var(--#{$prefix}accordion-border-radius);
    }

    &[open] {
      border-bottom: var(--#{$prefix}accordion-border-width) solid var(--#{$prefix}accordion-border-color);

      .accordion-collapse {
        animation-name: grid-expand;
      }

      summary {
        border-bottom: var(--#{$prefix}accordion-border-width) solid var(--#{$prefix}accordion-border-color);

        &::after {
          background-image: var(--#{$prefix}accordion-btn-icon);
          transform: var(--#{$prefix}accordion-btn-icon-transform);
        }
      }
    }

    &:not([open]) {
      summary {
        color: var(--#{$prefix}accordion-active-color);
        background-color: var(--#{$prefix}accordion-bg);
        box-shadow: inset 0 calc(-1 * var(--#{$prefix}accordion-border-width)) 0 var(--#{$prefix}accordion-border-color);

        &::after {
          background-image: var(--#{$prefix}accordion-btn-active-icon);
          transform: unset;
        }
      }

      &:last-of-type summary {
        border-bottom-right-radius: var(--#{$prefix}accordion-border-radius);
        border-bottom-left-radius: var(--#{$prefix}accordion-border-radius);
      }
    }
  }
}

@keyframes grid-expand {
  from {
    grid-template-rows: 0fr;
  }
  to {
    grid-template-rows: 1fr;
  }
}
